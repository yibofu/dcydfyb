<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>发票信息</title>
		<link rel="stylesheet" href="/Public/app/css/commonality.css" />
		<link rel="stylesheet" href="/Public/app/css/bill.css" />
		<script src="/Public/app/js/jquery.min.js"></script>
		<script src="/Public/app/js/bill.js"></script>
	</head>
	<body>
		<div class="page_all">
			<!--banner部分-->
			<include file="Public/myhead" />
			<!--内容部分-->
			<div class="text_all">
				<!--左侧菜单栏-->
				<include file="Public/myleft" />
				<!--个人信息-->
				<div class="main_person_text" >
					<p class="person_title"><span>发票信息</span></p>
					<div class="invoiceType">
						<p class="billCommonBtn">
							<input  type="radio" name="billtype" value="putong" checked="checked" id="putong"/>
							<label for="putong">普通发票</label>
							<img src="/Public/app/img/gou.png"/>
						</p>
						<p class="billAddBtn">
							<input  type="radio" name="billtype" value="zengzhi" id="zengzhi"/>
							<label for="zengzhi">增值税发票</label>
							<img src="/Public/app/img/gou.png"/></p>
					</div>
					<!--普通发票-->
					<div class="billCommon">
						<form name="putong">
						<div class="rise">
							<span>发票抬头：</span>
							<p class="personBill">
								<input  type="radio" name="billMold" value="个人" checked="checked" id="geren"/>
								<label for="geren">个人</label>
								<img src="/Public/app/img/gou.png" />
							</p>
							<p class="companyBill">
								<input  type="radio" name="billMold" value="gongsi" id="company1"/>
								<label for="company1">北京大财有道科技有限公司</label>
								<img src="/Public/app/img/gou.png" />
							</p>
							<a>新增单位发票</a>
						</div>
						<div class="contants">
							<span>发票内容：</span>
							<p class="contantAsk">
								<input  type="radio" name="billMain" value="1" checked="checked" id="zixun"/>
								<label for="zixun">咨询</label>
								<img  src="/Public/app/img/gou.png">
							</p>
							<p class="contantTrain">
								<input  type="radio" name="billMain"  value="2" id="peixun"/>
								<label for="peixun">培训</label>
								<img  src="/Public/app/img/gou.png">
							</p>
						</div>
						<div class="btn">
							<button name="sub" type="button" class="submitBtn">提交</button>
							<button class="abolishBtn">取消</button>
						</div>
						</form>
					</div>
					<!--增值税发票-->
					<div class="billAdd">
						<form name="zengzhi">
						<div class="billStyle">
							<span style="color: #666666;margin-left: 45px;margin-top:5px;">开票方式：</span>
							<p class="second_span">订单完成后开票<img src="/Public/app/img/gou.png"/></p>
						</div>
						<p class="company_name" style="margin-left: 32px;">
							<span>*</span>
							<span >单位名称：</span>
							<input type="text" name="company"/>
							<span class="hint"></span>
						</p>
						<p>
							<span>*</span>
							<span>纳税人识别码：</span>
							<input type="text" name="pcode" />
							<span class="hint"></span>
						</p>
						<p style="margin-left: 32px;">
							<span>*</span>
							<span>注册地址：</span>
							<input type="text" name="address" />
							<span class="hint"></span>
						</p>
						<p style="margin-left: 32px;">
							<span>*</span>
							<span>注册电话：</span>
							<input type="text" name="phone" />
							<span class="hint"></span>
						</p>
						<p style="margin-left: 32px;">
							<span>*</span>
							<span>开户银行：</span>
							<input type="text" name="openbank" />
							<span class="hint"></span>
						</p>
						<p style="margin-left: 32px;">
							<span>*</span>
							<span>银行账户：</span>
							<input type="text" name="openaccount" />
							<span class="hint"></span>
						</p>
						<div class="btn">
							<button type="button" name="sub" class="submitBtn">提交</button>
							<button class="abolishBtn">取消</button>
						</div>
						</form>
					</div>
					
				</div>
				
			</div>
			<!--友情链接-->
			<include file="Public/mybottom" />
		</div>
	</body>
	<script>
		$('button[name="sub"]').click(function() {
			var url = '';
			var type = $('input[name=billtype]:checked').val();
			var data = collectForm(type);
			switch(type) {
				case 'putong':
					url = '{:U("MyCenter/ptbill")}';
					break;
				
				case 'zengzhi':
					url = '{:U("MyCenter/zzbill")}';
					break;
			}

			$.post(
				url, 
				{'data':data}, 
				function(res) {
					if(res == 1) {
						alert('申请成功');
					} else {
						alert(res);
					}
				}	
			);
		});

		//收集表单数据
		function collectForm(name) {
			var data = {};
			var form = 'form';
			if(name != '') {
				form = form + '[name=' +name+ ']';	
			}

			var checkbox = $(form + ' input[type=checkbox]:checked'); 
			var checkBoxName = checkbox.attr('name');
			data[checkBoxName] = [];
			checkbox.each(function() {
					data[checkBoxName].push($(this).val());
			});

			var radio = $(form + ' input[type=radio]:checked'); 
			radio.each(function() {
				var radioName = $(this).attr('name');
				data[radioName] = '';
			});

			radio.each(function() {
				var rname = $(this).attr('name');
				data[rname] = $(this).val();
			});

			$(form + ' input,select,textarea').each(
				function(){
					if($(this).val() != '') {
						var tmp = $(this).attr('name');
						var type = $(this).attr('type');
						if(type != 'checkbox' && type != 'radio') {
							data[tmp] =  $(this).val();
						}
					}
			});

			return data;
		}	
	</script>
</html>
