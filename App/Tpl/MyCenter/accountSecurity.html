<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>账户安全</title>
		<link rel="stylesheet" href="/Public/app/css/account-security.css" />
		<link rel="stylesheet" href="/Public/app/css/commonality.css" />
		<script src="/Public/app/js/jquery.min.js"></script>
	</head>
	<body>
		<div class="page_all">
			<!--banner部分-->
			<include file="Public/myhead" />
			<!--内容部分-->
			<div class="text_all">
				<!--左侧菜单栏-->
				<include file="Public/myleft" />
				<!--个人信息-->
				<div class="main_person_text" >
						<p class="person_title"><span>账户安全</span></p>
						<div class="security">
							<form>
								<p><span>原始密码：</span><input class="oldPassword"  type="text" name="oldpasswd"/><span class="hint"></span></p>
								<p><span>新建密码：</span><input  class="newPassword" type="text" name="newpasswd"/><span class="hint"></span></p>
								<p><span style="margin-left: 14px;">验证码：</span><input  type="text" class="inputCode" name="vcode"/><input class="codeBtn" type="button" value="发送验证码" name="sendCode"></p>
								<button name="sub" type="button">提交</button>
							</form>
						</div>
				</div>
				
			</div>
			<!--友情链接-->
			<include file="Public/mybottom" />
	</body>
	<script>
			$(function(){
				$(".bac-e a").eq(3).css("color","#55BDCF");

				/*
				$('input[name=sendCode]').click(function(){
					var uid = {$uid}
					$.post('{:U("Code/chwd")}', {'uid':uid}, 
							function(res){
								alert(res);
							}
					);		
						
				});
				*/
			});


		$('button[name="sub"]').click(function() {
			var data = collectForm();
			console.log(data);
			$.post(
				'{:U("MyCenter/changePassword")}', 
				{'data':data}, 
				function(res) {
					alert(res);
				}	
			);
		});



		//收集表单数据
		function collectForm(name) {
			var data = {};
			var form = 'form';
			if(name) {
				form = form + '[name=' +name+ ']';	
			}

			var checkbox = $(form + ' input[type=checkbox]:checked'); 
			var checkBoxName = checkbox.attr('name');
			data[checkBoxName] = [];
			checkbox.each(function() {
					data[checkBoxName].push($(this).val());
			});

			var radio = $(form + ' input[type=radio]:checked'); 
			radio.each(function() {
				var radioName = $(this).attr('name');
				data[radioName] = '';
			});

			radio.each(function() {
				var rname = $(this).attr('name');
				data[rname] = $(this).val();
			});

			$(form + ' input,select,textarea').each(
				function(){
					if($(this).val() != '') {
						var tmp = $(this).attr('name');
						var type = $(this).attr('type');
						if(type != 'checkbox' && type != 'radio') {
							data[tmp] =  $(this).val();
						}
					}
			});

			return data;
		}


		</script>
</html>
